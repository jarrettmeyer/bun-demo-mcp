# Magic 8-Ball MCP Server

A demo MCP server built with TypeScript and Bun.

## Project Structure

- `src/index.ts` — MCP server entry point (tool, prompt, resource)
- `manifest.json` — MCPB bundle manifest for Claude Desktop
- `dist/` — Compiled JS output (generated by `bun build`)

## Development

```bash
bun install          # Install dependencies
bun run start        # Run the server (stdio transport)
```

## Testing with MCP Inspector

The [MCP Inspector](https://github.com/modelcontextprotocol/inspector) is a browser-based UI for testing MCP servers.

```bash
bun run inspect
# or directly:
bunx @modelcontextprotocol/inspector bun run src/index.ts
```

This opens a web UI at http://localhost:6274 with a proxy on port 6277.

### What to test

1. **Tools tab** — Select "shake", enter a question, click "Call". Verify you get a random 8-Ball response.
2. **Prompts tab** — Select "ask-the-8-ball", enter a question, click "Get Prompt". Verify the prompt message is returned.
3. **Resources tab** — Click "magic-8-ball://responses". Verify the JSON contains all 20 responses grouped by category.

## Testing with Playwright MCP

Use the Playwright MCP browser tools to automate testing of the Inspector UI:

1. Start the inspector: `bun run inspect`
2. Navigate to `http://localhost:6274`
3. Use `browser_snapshot` to capture the page state
4. Use `browser_click` to interact with tabs (Tools, Prompts, Resources)
5. Use `browser_fill_form` to fill in tool/prompt arguments
6. Use `browser_snapshot` after each action to verify results

### Example Playwright test flow

1. Navigate to http://localhost:6274
2. Click "Connect" to connect to the MCP server
3. Click the "Tools" tab
4. Select "shake" from the tool list
5. Fill in the "question" field with a test question
6. Click "Run Tool" / "Call"
7. Snapshot and verify the response contains an 8-Ball answer
8. Repeat for Prompts and Resources tabs

## Packaging with mcpb

```bash
bun run build                    # Compile TS to dist/index.js
bunx @anthropic-ai/mcpb validate manifest.json  # Validate manifest
bunx @anthropic-ai/mcpb pack .   # Create .mcpb file
```

## Conventions

- Use Bun, not npm/node, for all development tasks
- Use `zod/v4` for schema validation (not `zod` directly)
- Import MCP SDK from `@modelcontextprotocol/sdk/server/mcp.js` and `@modelcontextprotocol/sdk/server/stdio.js`
